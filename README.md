# Infomat (LINUX)

## 1 Файл настроек - config.txt

### 1.1 Расположение

Файл с параметрами должен быть расположен в папке /config и иметь название config.txt

### 1.2 Параметры

Данный файл понимает такие параметры как:
* Api-key - ключ приложения к базе данных;
* Port-Name - название порта соединенного со считывателем штрих-кодов, например, COM9;
* Document-Dir - путь к папке с файлами на печать;

Обязательные параметры:
* Api-key
* Port-Name
* Document-Dir

### 1.3 Синтаксис

При заполнении файла с настройками важно придерживаться синтаксиса. В противном случае программа может работать некорректро или не рабоать совсем.

Каждую настройку необходимо писать таким образом:
```ini
НазваниеПараметра : ЗначениеПараметра;
```
Пример заполнения файла:
```ini
Api-key              : fsof00af9fbg08derjvsre9;
Port-Name            : /dev/ttyUSB0;
Document-Dir         : /var/www/infomat/documents/;
```
Порядок параметров в данном файле соблюдать необязательно.

ВАЖНО: 
1. Не забыть поменять апи ключ на реальный.
2. В конце значение директории необходимо оставить слэш "/"

## 2 Настройка системы

### 2.1 Локальный сервер

В качестве сервера потребуется nginx/apache в связке с php.

Необходимо будет создать виртуальный хост в папочку с инфоматом.

ВАЖНО: Необходимо дать права владения папкой Infomat группе и юзеру www-data:www-data

### 2.2 Настройка сканера

(Данные могут отличаться)

Нужно:
1. Подключить сканер в USB port
2. Установить характеристики ввода-вывода:

modprobe ftdi_sio

echo 0403 1234 > /sys/bus/usb-serial/drivers/ftdi_sio/new_id

stty -F /dev/ttyUSB0 cs8 cstopb -ixon raw speed 9600

(Протестировать сканер можно будет с помощью команды "cat /dev/ttyUSB0"

3. Назначить nginx/apache владельцем файла порта:

chown www-data:www-data /dev/ttyUSB0

### 2.2 Настройка принтера

Нужно подсоединить принтер, назначить его принтером по умолчанию и сделать пробную печать для проверки работоспособности.




